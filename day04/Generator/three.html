<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
	</body>
	<script>
		function s1(type,url){
			let ajax=new XMLHttpRequest();
			ajax.open(type,url,true);
			ajax.send();
			return new Promise((resolve,reject)=>{
				ajax.onreadystatechange=function(){
					 
					if(ajax.readyState==4 && ajax.status==200){
						
						resolve(ajax.responseText);
						
					}
					
				}
				
				
				
			})
		}
		
		
		
		
		
		
		function* s3(){
			yield s1("get","user.json");
			yield s1("get","user.json");
			yield s1("get","user.json");
		}
		
		// 生成一个状态机
		let s4=s3();
		s4.next().then(()=>{//第一个异步请求成功
			return s4.next();
		})
		
		.then(()=>{//第二个异步请求成功
			s4.next();
		})
		
		
		
		
		
		
	</script>
</html>
